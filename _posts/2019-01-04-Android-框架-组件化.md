---
layout: post
title: "Android框架之组件化"
subtitle: 'Android'
date:       2019-01-04
author: "Wangxiong"
header-style: text
tags:
  - Android
  - 组件化
  - 应用程序框架
---
## 1. 组件化简介

组件化就是将一个应用拆分成多个组件，拆分的方法主要是按业务模块进行拆分，对代码进行解耦便于多人协作开发，提高开发效率。组件的拆分一般分为基础组件，业务组件，app壳工程。

- 基础组件是通用的组件，供所有的业务组件使用，提供基础通用的能力，比如网络加载库，图片库，埋点等。
- 业务组件是主要的业务功能体现，主要是业务需求的实现，按照不同功能进行聚合拆分，业务组件会进行不断的开关迭代，是日常开发最长修改的组件。
- app壳工程：app壳工程是应用的主工程，用于集成各个组件，构建出最终的产品，app壳工程一般很有有业务代码，主要应用的程序入口，闪屏页。

## 2. 组件化的核心

使用组件化进行App的构建需要考虑以下几个核心问题。

### 2.1 组件之间的跳转

组件和组件之间必然存在跳转的功能，一般组件化处理的方式是，提供一个注册路由，各个组件注册到路由中，然后通过路由进行组件查找和跳转，跳转的核心还是基本的startActivity跳转。路由一般是使用url的方式，申明组件的对应关系。

### 2.2 组件之间的调用

组件之间不仅仅包括跳转，还有一些业务需求上的调用关系，而组件化后组件直接的调用就相对负责，一般的情况是抽象出接口，组件进行实现，通过接口下沉的方式，调用组件的时候通过发射接口的实现，调用接口。

## 3. 常见的问题

library依赖问题，找到冲突的库，修改为编译时依赖或者剔除。

组件之间资源名冲突问题，使用resourcePrefix设定各组件的资源名前缀

## 4. 组件化APT的使用

组件化一般都会用到自定义APT，进行路由注册实现组件间跳转，接口注册的方式实现组件间调用。