---
layout: post
title: "「Java基础」编程思想"
subtitle: 'Java基础回顾复习'
date:       2018-03-19
author: "Wangxiong"
header-style: text
tags:
  - Java
---

## 1. 面向过程编程

面向过程就是分析出解决问题所需要的步骤，然后用函数把这些步骤一步一步实现，使用的过程一个一个依次调用就可以了。

## 2. 面向对象编程

面向对象编程（OOP）是Java的核心思想，面向对象编程(Object Oriented Programing)是一种软件开发方法。面向对象是把构成问题的事务分解成各个对象，建立对象的目的不是为了完成一个步骤，而是为了描述某个事务在整个解决问题步骤中的行为，面向对象就是一切事务皆可是对象。

### 2.1 面向对象设计的准则

- 单一职责原则：低耦合、高内聚，一个专注单一的功能，改变其中的功能不影响其他功能。
- 开闭原则：对拓展开发，对修改关闭。即设计的模块可以在不被修改的前提下被拓展、同时模块原有的代码不需要修改，保证稳定性。
- 里氏替换原则：子类可以当父类使用，子类可以有自己的不同实现。
- 依赖倒转原则：依赖于抽象，不依赖于具体的实现。
- 接口分理原则：一个接口不需要提供太多的行为，一个接口应该只提供一种对外的功能，不应该把所有的操作都封装到一个接口中。
- 迪米原则：一个对象应该对其他对象尽可能少的了解，不和陌生人说话。

### 2.2 Java多态的理解

#### 2.2.1 面向对象编程的三大特性就是封装、继承、多态。

- 封装：隐藏类的内部实现机制。
- 继承：重用父类代码，为多态做铺垫。
- 多态：程序中定义的引用变量所指向的具体类型和通过该引用变量发出的方法调用在编程时并不确定，而是在程序运行时期才确定。

#### 2.2.2 实现多态的三个必要条件：继承、重写、向上转型。

- 继承：在多态中必须有存在继承关系的子类和父类。
- 重写：子类对父类中的某些方法进行重新定义，在调用这些方法时就会调用子类的方法。
- 向上转型：将父类引用指向子类对象，该引用具备调用子类的功能，即子类当父类用。

#### 2.2.3 实现多态的形式。

- 基于继承实现的多态.
- 基于接口实现的多态。

#### 2.2.4 继承

父类的静态方法可以被子类继承，但是父类的静态方法不能被子类重写，但是如果子类申明了和父类相同的静态方法，只能称为隐藏，隐藏了父类的静态方法。

## 3. 面向切面编程

面向切面编程(AOP)，是面向对象的思维方式的有力补充，AOP的好处就是可以动态的添加和删除在切面上的逻辑而不影响原来执行的代码。所谓切面指的就是贯穿到系统各个模块的一个功能就是一个切面，比如，记录日志，统一处理异常，权限检查等，这些都是软件系统的一个面，而不是一个点，在每个模块都要出现。面向切面编程就是把系统的一个方面的功能封装成对象的形式来处理。纵向关系OOP，横向关系AOP。Android AOP常用的方法有JNI Hook和静态织入。

### 3.1 动态织入Hook方式

- Dexposed

- Xposed

- epic 在native层修改java method对应的native指针

- 动态字节码生成

  Cglib+Dexmaker：Cglib 是一个强大的,高性能的 Code 生成类库， 原理是在运行期间目标字节码加载后，通过字节码技术为一个类创建子类，并在子类中采用方法拦截的技术拦截所有父类方法的调用，顺势织入横切逻辑。由于是通过子类来代理父类，因此不能代理被 final 字段修饰的方法。但是 Cglib 有一个很致命的缺点：底层是采用著名的 ASM 字节码生成框架，使用字节码技术生成代理类，也就是通过操作字节码来生成的新的 .class 文件，而我们在 Android 中加载的是优化后的 .dex 文件，也就是说我们需要可以动态生成 .dex 文件代理类，因此 Cglib 不能在 Android 中直接使用。有大神根据 Dexmaker 框架（dex代码生成工具）来仿照 Cglib 库动态生成 .dex 文件，实现了类似于 Cglib 的 AOP 的功能。详细的用法可参考：[将cglib动态代理思想带入Android开发](https://link.juejin.im?target=http%3A%2F%2Fblog.csdn.net%2Fzhangke3016%2Farticle%2Fdetails%2F71437287)

### 3.2 静态织入方式

- 在编译期织入，切面直接以字节码的形式编译到目标字节码文件中，，这要求使用特殊的 Java 编译器。
- 在类装载期织入，这要求使用特殊的类装载器。

1. APT
2. AspectJ
3. ASM
4. Javassist
5. DexMaker
6. ASMDEX

![img](https://user-gold-cdn.xitu.io/2018/11/30/167652d47ef065f1?imageslim)